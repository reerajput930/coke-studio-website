<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>coke product</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Caucasian+Albanian&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Caucasian+Albanian&family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Caucasian+Albanian&family=Noto+Sans+Mono:wght@100..900&family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">

</head>
<style>
    body{
        padding: 0;
        margin: 0;
    }
  

</style>
<body>
    <nav>
        <div id="navUper">
        <div id="navPartition-1">
            <img src="./Components from Figma/corner left - brand.png" alt="img loading">
        </div>
        <div id="navPartition-2">
            
            
            <div class="menu">Discover ></div>
            <div class="menu">Impact > </div>
            <div class="menu">Explore more </div>
        
        </div>
        <div id="navPartition-3">
            <div id="navPartitionLeft1">
                <button class="btn"> <img src="./Components from Figma/User Male.png" alt="">Sign up / Login</button></div>
            <div id="navPartitionLeft2"><img src="./Components from Figma/Shopping Cart.png" alt="still loading"></div>
        </div>
</div>
        <div class="navLower">
            <img src="./Components from Figma/center-brand.png" alt="">
        </div>

    </nav>
    
        <div id="top">
            <div id="toptop">
                <ul>
                    <li>Home</li>
                    <li>Brands</li>
                    <li>Promos & Offers</li>
                    <li>Coke studio</li>
                    <li>Show now</li>
                </ul>
                
            </div>
            <div id="toplower">
                <div id="topleft">
                    <h1 style="margin-bottom: -.3em;">Cola</h1>
                    <p>Ice-cold, crisp, and effortlessly refreshing, Coke delivers a smooth, fizzy taste that instantly lifts your mood.</p>
                    <p style="margin-top: 1em;"> Every sip feels light, balanced, and satisfying, making it the perfect refreshment for any moment when you just want to pause, chill, and enjoy the classic taste you love.</p>
                 <div class="btn" id="topleftbtn">Shop Now </div>
                </div>
                <div id="topright">

                    <!-- regular coke -->
                   <div id="coke3d"></div>    

              <!-- <img id="regularcoke" src="./Components from Figma/regular coke.png" alt="loading..."> -->
              <img id="dietcoke" src="./Components from Figma/diet coke.png" alt="loading...">
                </div>
            </div>

        </div>



        <div id="topbottom">
            <img src="./Components from Figma/Forward.png" alt="">
            <div class="infoMenu">
                <p class="mini">INGREDIENTS</p>
                <p class="large">100% Organic</p>

            </div>
            <div class="infoMenu">
                <p class="mini">MATERIAL</p>
            <p class="large">Food Grade</p></div>
            <div class="infoMenu">
                <p class="mini">FLAVOR</p>
            <p class="large">9 Variation</p></div>
            <div class="infoMenu">
                <p class="mini">VOLUME</p>
            <p class="large">335 ml</p></div>
            <div class="infoMenu">
                <p class="mini">DELIVERY</p>
            <p class="large">Free</p></div>
        </div>

        <div id="middle">
            <div class="middletopleft">
                <h2>Our Success Stories And Mission!</h2>
                <p>We’re proud of what we create at Coca-Cola, with a long legacy of crafting iconic beverages using a secret recipe and time-honored methods that have been handed down from generation to generation of the Coca-Cola family.</p>
                <p style="margin-top: 1em;" >We’re proud of what we create at Coca-Cola, with a long legacy of crafting iconic beverages.”</p>
            </div>
            <div class="middletop">
                <!-- <img src="./Components from Figma/regular coke.png" alt=""> -->
            </div>
            <div class="middletopright">
                <img src="./Components from Figma/graph.png" alt="">
            </div>

        </div>
        <div id="middlebottom">
            <div><img src="./Components from Figma/graph2.png" alt=""></div>
            <div id="details">
                <div><h2>56</h2>
                <p>Countries Sported</p> </div>
                <div><h2>122+</h2>
                <p>International Branches</p></div>
                <div><h2>1M+</h2>
                <p>Sales Through Out The World</p>
                
            </div>
        </div>
        </div>

        <div id="products">
            <div id="headingtop">
                <h2>Our Products</h2>
                <p>Our is focused on producing light products that bring comfort and convenience to everyone's life. 
Our products are the lights people need to live and thrive. Founded in 1899.</p>
            </div>
            <div id="menuclick">
                <ul>
                <li style="
    border: 2px solid red;
    color: red;
" >Popular</li>
                <li>Beers</li>
                <li>Soda Water</li>
                <li>Cola's</li>
                <li>Diet</li>
                <li>See all</li>
            </ul>
            </div>
            <div id="productsbottom">
                <img style="position: relative;
    top: 3.3em;" src="./Components from Figma/order -1.png" alt="">
                <img src="./Components from Figma/order -2.png" alt="">
                <img src="./Components from Figma/order -3.png" alt="">
                <img src="./Components from Figma/order -4.png" alt="">
                <img src="./Components from Figma/order -5.png" alt="">
                <img src="./Components from Figma/order-6.png" alt="">
            </div>

        </div>


        <!-- js script -->
 <script>
      const can = document.getElementById("coke3d");
      const b2 = document.getElementById("middle");
      const b3 = document.getElementById("products");

      // Your 3 states (in em + deg) exactly as you gave
      const S1 = { topEm: 18, leftEm: 29, rot: 6 };
      const S2 = { topEm: 1, leftEm: 39, rot: 0 };
      const S3 = { topEm: -20, leftEm: -30, rot: 0 };

      function clamp01(v) {
        return Math.max(0, Math.min(1, v));
      }
      function lerp(a, b, t) {
        return a + (b - a) * t;
      }

      // Convert em -> px using the wrapper’s font-size (so it matches your CSS units)
      function emToPx(em) {
        const fs = parseFloat(getComputedStyle(can).fontSize) || 16;
        return em * fs;
      }
       
   
      // progress through a section: 0 at section start, 1 at section end
      function sectionProgress(section) {
        const r = section.getBoundingClientRect();
        const canRect = can.getBoundingClientRect();
        const start = canRect.bottom; // animation starts only when the section’s top touches the bottom of the viewport
        const end = -r.height; // when section bottom passes top
        return clamp01((start - r.top) / (start - end));
      }

      function applyState(a, b, t) {
        const topPx = lerp(emToPx(a.topEm), emToPx(b.topEm), t);
        const leftPx = lerp(emToPx(a.leftEm), emToPx(b.leftEm), t);
        const rotDeg = lerp(a.rot, b.rot, t);

        // Because top/left are already set in CSS (state1), we move by transform offsets:
        const baseTopPx = emToPx(S1.topEm);
        const baseLeftPx = emToPx(S1.leftEm);

        const dx = leftPx - baseLeftPx;
        const dy = topPx - baseTopPx;

        can.style.transform = `translate(${dx}px, ${dy}px)`;
        can.style.rotate = `${rotDeg}deg`;
      }

      let ticking = false;
      function tick() {
        ticking = false;

        const t2 = sectionProgress(b2);
        const t3 = sectionProgress(b3);

        // Piecewise:
        // - before block2: S1
        // - through block2: S1 -> S2
        // - after block2 but before block3: S2
        // - through block3: S2 -> S3
        // - after block3: S3
        if (t2 === 0 && t3 === 0) {
          applyState(S1, S1, 0);
        } else if (t2 > 0 && t2 < 1 && t3 === 0) {
          applyState(S1, S2, t2);
        } else if (t2 === 1 && t3 === 0) {
          applyState(S2, S2, 0);
        } else if (t3 > 0 && t3 < 1) {
          applyState(S2, S3, t3);
        } else if (t3 === 1) {
          applyState(S3, S3, 0);
        }
      }

      function onScroll() {
        if (!ticking) {
          ticking = true;
          requestAnimationFrame(tick);
        }
      }

      window.addEventListener("scroll", onScroll, { passive: true });
      window.addEventListener("resize", () => requestAnimationFrame(tick));
      tick(); // initial

      //   three.js
      let currentBlock = 1;
      
      
      const observer = new IntersectionObserver(
          (entries) => {
              entries.forEach((entry) => {
                  if (entry.isIntersecting) {
                      if (entry.target.id === "top") currentBlock = 1;
                      if (entry.target.id === "middle") currentBlock = 2;
                      if (entry.target.id === "products") currentBlock = 3;
                    }
                });
            },
            { threshold: 0.6 },
        );
        
      ["top", "middle", "products"].forEach((id) => {
          observer.observe(document.getElementById(id));
      });
      </script>
       
=

        <script type="module" src="./3D-can.js"></script>
        
    </body>
   

 

</html>